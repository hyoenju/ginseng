{% extends 'base.html'%}

{% load staticfiles %}

{% block optional_javascript %} 		

	<!-- Graph -->
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<link href="{%static 'css/graph.css'%}" rel="stylesheet">
	
	<script>
//$(document).ready(function(){
//	$('#graph_scatter').on('submit',function(e){
//		e.preventDefault();
//	
//		x_value = $("#graph_x option:selected").val();
//		y_value = $("#graph_y option:selected").text();
//		startDate = $j("#startDate").datepicker("getDate");
//		endDate = $j("#endDate").datepicker("getDate");
//
//		$("input[class=checkbox]:checked").each(function(){
//			select_sensor = ($(this).val());
//			alert (select_sensor)
//		})

//		$.ajax({
//			type     : "GET",
//			cache    : false,
//			url      : "/get_selector/", 
//			data     : {x_value: $("#graph_x option:selected").val()},
//			success  : function(response) {
//				alert("hello")
//			},
//			error		 : function(response) {
//			alert("failed")
//			}

//		});
//	});
//});
//		$(document).ready(function(){
//			$('#confirm').on("click",function(){
//				$('#graph_scatter').preventDefault();
//				x_value = $("#graph_x option:selected").val();
//				y_value = $("#graph_y option:selected").text();
//				startDate = $j("#startDate").datepicker("getDate");
//				endDate = $j("#endDate").datepicker("getDate");
//				alert (x_value)
//				$("input[class=checkbox]:checked").each(function(){
//					select_sensor = ($(this).val());
//					alert (select_sensor)
//				})
//				$.ajax({
//					url: "/get_selector/",
//					type: "GET",
//					data:	{x_value: $("#graph_x option:selected").val()},
//					success: function(httpResponse){
//						alert(httpResponse)
//					},
//					error: function(response){
//						alert("failed")
//					},
//				});
//			});
//		});
	</script>


	<!-- datepicker-->
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" type="text/css" />
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>	
	<script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>

{% endblock %}

{% block dropdown_navbar %}
	<li class="dropdown">
		<button href="#" class="dropdown-toggle btn btn-link navbar-btn" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About<span class="caret"</span></button>
		<ul class="dropdown-menu" role="menu" style="text-align : center">
			<li class="page-scroll"><a href="#about">프로젝트 소개</a></li>
			<li class="page-scroll"><a href="#IoT_process">IoT</a></li>
			<li class="page-scroll"><a href="#statistics">통계분석</a></li>
			<li class="page-scroll"><a href="#visualization">시각화</a></li>
		</ul>
	</li>
	<li class="dropdown">
		<button href="#" class="dropdown-toggle btn btn-link navbar-btn" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Graph<span class="caret"</span></button>
		<ul class="dropdown-menu" style="text-align : center">
			<li class="page-scroll"><a href="#sensor_graph">SENSOR</a></li>
			<li class="page-scroll"><a href="#graph">graph</a></li>
		</ul>
	</li>
{% endblock %}
		
{% block link_navbar %}
	<li><a href="/administer"><span class="glyphicon glyphicon-user" aria-hidden="true" style="font-size:175%"></span></a></li>
{% endblock %}

{% block content %}

<!-- Header -->
<header>
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<img class="img-responsive" src="{% static 'img/plant6.png' %}" alt="">	
				<div class="intro-text">
					<span class="name">Plant factory</span>
					<hr class="star-light">
					<span class="skills">산업경영공학과와 응용통계학과가 함께하는 다학제적 창의적 종합설계 프로젝트</span>
				</div>
			</div>
		</div>
	</div>
</header>


<!--about-->
<section id="about">
	<div class = "container">
		<div class="row">
			<div class="col-lg-12 text-center">
					<h2>About</h2>
					<hr class="star-primary">
			</div>
		</div>
		<div class="row">
				<div class="col-lg-8 col-lg-offset-2 text-center">
					<img src="{% static 'img/sensor_1.png' %}" alt="">
					<div class="row"><p style="font-size:15pt"><br></p></div>
					<p> 인삼은 매우 예민한 식물로서 여러 환경요인에 의하여 쉽게 질병을 갖는 식물입니다.<br> 우리는 IoT기술을 이용하여 환경요인들을 측정하고 병징에 영향을 주는 요인이 무엇인지 찾고자 했습니다. 하지만 인삼은 여러해살이 식물이기 때문에 프로젝트 시기상 관찰시기와 엇갈려 인삼 대신 식물 연구에 많이 쓰이는 모델 식물인 애기장대를 사용하여 프로젝트를 실행하였습니다.<br> 이 프로젝트가 앞으로 IoT를 이용한 효율적 식물재배 및 징병예측에 도움을 주길 바랍니다.</p>
				</div>
		</div>
	</div>
</section>

<!-- IoT -->
<section class="success" id="IoT_process">
	<div class = "container">
		<div class="row">
			<div class="col-lg-12 text-center">
					<h2>IoT Process</h2>
					<hr class="star-light">
			</div>
		</div>
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 text-center">
				<p style="text-align: center">라즈베리 파이를 통해 센서를 이용하여 환경 요인들을 측정합니다.</p>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-4">
				<h3 class="well" style="text-align: center; font-size:18pt; color:#2c3e50" >빛 & 토양수분 센서</h3>
				<p>파이썬 코드를 이용하여 각 요소들의 존재에 따라 저항값을 측정하여 데이터로 표시합니다.</p>
			</div>
			<div class="col-sm-4">
				<h3 class="well" style="text-align: center; font-size:18pt; color:#2c3e50" >온도 & 습도 센서</h3>
				<p>DHT11 센서의 활용 오픈 소스코드를 이용하여 데이터를 센싱합니다.</p>
			</div>
			<div class="col-sm-4 portfolio-item">
				<h3 class="well" style="text-align: center; font-size:18pt; color:#2c3e50">회로</h3>
				<p>센서 안 VCC(전원공급), DO(센싱 디지털 정보 전송), GND(전류 흐름 정리) 핀을 브레드보드와 라즈베리 파이에 연결합니다.</p>
			</div>
		</div>
	</div>
</section>	

<!-- Statistics Section -->	
<section id="statistics">
	<div class="container">
		<div class="row">
			<div class="col-lg-12 text-center">
				<h2>Statistics Process</h2>
				<hr class="star-primary">
			</div>
		</div>
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 text-center">
				<p style="text-align: center">수집된 센서 측정 데이터를 통계 처리 프로그램을 이용하여 식물 생장에 대해 분석합니다.</p>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-4">
				<h3 class="well" style="text-align: center; font-size:18pt; color:#2c3e50" >관련 문헌조사 </h3>
				<p>무선 센서를 이용한 질병 측정과 관련된 국내외 논문 조사를 시행함</p>
				<p>애기장대 재배법과 특징을 조사함</p>
			</div>
			<div class="col-sm-4">
				<h3 class="well" style="text-align: center; font-size:18pt; color:#2c3e50" >성장 실험 설계</h3>
				<p>센서, 식물 배치, 실험 환경을 조절하여 설계함</p>
			</div>
			<div class="col-sm-4 portfolio-item">
				<h3 class="well" style="text-align: center; font-size:18pt; color:#2c3e50">자료 정리 및 분석</h3>
				<p>SPSS, R 프로그램 사용하여 그래프와 기초통계량 등을 통해 대략적인 데이터 파악</p>
			</div>
		</div>
		
		<div class="col-lg-8 col-lg-offset-2">
				<h3 class="well" style="text-align:center; color:#2c3e50;">주요 통계 기법</h3>
				<ul style="list-style-type:circle;">
					<li/><p>기술 통계 분석 : 데이터의 기초 속성과 빈도 및 분포를 파악하기 위해 각종 통계량(평균, 분산, 분위수, 중앙값 등)을 분석합니다.</p>
					<li/><p>상관 분석 : 인자들 사이에 서로 어떠한 상관관계가 있는지 파악합니다.</p>
					<li/><p>회귀 분석 : 습도(X1), 토양 산도(X2), 토양 성분(X3), 기후(X4)를 이용하여 인삼 질병(Y)과의 함수관계를 밝혀냅니다.</p>
				</ul>
			</div>
		</div>
	</div>
</section>

<!-- visualization -->
<section class="success" id="visualization">
	<div class = "container">
		<div class="row">
			<div class="col-lg-12 text-center">
					<h2>Visualization</h2>
					<hr class="star-light">
			</div>
		</div>
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 text-center">
				<p style="text-align: center">웹페이지를 설계하고 센싱한 데이터를 그래프로 표시합니다.</p>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-4">
				<h3 class="well" style="text-align: center; font-size:18pt; color:#2c3e50" >BOOTSTRAP</h3>
				<p>반응형 웹사이트를 만들기에 용이한 스타일 시트와 자바스크립트 플러그인의 라이브러리인 부트스트랩을 이용하여 프로젝트 웹페이지를 설계합니다.</p>
			</div>
			<div class="col-sm-4">
				<h3 class="well" style="text-align: center; font-size:18pt; color:#2c3e50" >DJANGO</h3>
				<p>python 기반의 웹 프레임워크인 Django는 database를 연결하고 url 요청별로 데이터나 화면에 어떻게 보여줄 것인가를 설정하는 등의 역할을 합니다.</p>
			</div>
			<div class="col-sm-4 portfolio-item">
				<h3 class="well" style="text-align: center; font-size:18pt; color:#2c3e50">D3.js</h3>
				<p>자바스크립트를 기반으로 하는 데이터 시각화 프레임워크인 D3.js를 이용하여 센서에서 보내주는 데이터를 실시간으로 시각화 합니다.</p>
			</div>
		</div>
	</div>
</section>	

<!--sensor graph-->
<section id="sensor_graph">
	<div class="container">
		<div class="row">
			<div class="col-lg-12 text-center">
				<h2>SENSOR GRAPH</h2>
				<hr class="star-primary">
			</div>
		</div>
		<div class="col-lg-8 col-lg-offset-2 text-center">	
			<form role="form">
				<div class="checkbox">
					<label style="color:red"><input type="checkbox" class="sensor" id="temperature" value="temperature">temperature</label>
					<label><input type="checkbox" class="sensor" id="soil_humidity" value="soil_humidity">soil_humidity</label>
					<label style="color:blue"><input type="checkbox" class="sensor" id="humidity" value="humidity">humidity</label>
					<label style="color:skyblue"><input type="checkbox" class="sensor" id="illumination" value="illumination">illumination</label>
				</div>
			</form>
			<div class="row">
				<svg id="lineGraph"></svg>
			</div>
			<div id="check_sensor">
				<button type="submit" id="sensor1_data" class="import_data btn btn-default">SENSOR 1</button>
				<button type="submit" id="sensor2_data" class="import_data btn btn-primary">SENSOR 2</button>
				<button type="submit" id="sensor3_data" class="import_data btn btn-default">SENSOR 3</button>
				<button type="submit" id="sensor4_data" class="import_data btn btn-primary">SENSOR 4</button>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="{% static 'js/lineGraph.js' %}"></script>
</section>

<!--graph-->
<section id="graph"> 
	<div class="container">
		<div class="row">
			<div class="col-lg-12 text-center">
				<h2>GRAPH</h2>
				<hr class="star-primary">
			</div>
		</div>
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 text-center">
				<form id="graph_scatter" role="form" method="post">
				 {% csrf_token %}	
				 <!--<div class="checkbox">
						<label><input type="checkbox" class="checkbox" value="sensor_1">SENSOR 1</label>
						<label><input type="checkbox" class="checkbox" value="sensor_2">SENSOR 2</label>
						<label><input type="checkbox" class="checkbox" value="sensor_3">SENSOR 3</label>
						<label><input type="checkbox" class="checkbox" value="sensor_4">SENSOR 4</label>
					</div>
					-->
					<label>start &nbsp;:&nbsp;
						<input type="text" id="startDate" style="width:100px; text-align:center">
						<script>
							var $j = jQuery.noConflict();
							$j("#startDate").datepicker();
						</script>
					</label>
					<label>&nbsp;end&nbsp;:&nbsp;
						<input type="text" id="endDate" style="width:100px; text-align:center">
						<script>
							var $j = jQuery.noConflict();
							$j("#endDate").datepicker();
							</script>
					</label>
					<label>&nbsp;가로축&nbsp;:&nbsp;</label>
						<select class="btn btn-default btn-xs" id="graph_x">						
							<option value="temperature" selected>기온</option>
							<option value="humidity">습도</option>
							<option value="soil_humidity">토양 수분</option>
							<option value="illumination">조도</option>
						</select>
					</label>
					<label>&nbsp;세로축&nbsp;:&nbsp;
						<select class="btn btn-default btn-xs" id="graph_y">
							<option value="temperature" selected>기온</option>
							<option value="humidity"> 습도</option>
							<option value="soil_humidity">토양 수분</option>
							<option value="illumination">조도</option>
						</select>
					</label>
					<label>&nbsp;적용&nbsp;:&nbsp; <input type="submit" id="confirm" class="btn btn-primary btn-xs" value="&nbsp;&nbsp;확&nbsp;&nbsp;인&nbsp;&nbsp;"></label>
				</form>	
				<div id="scatter">
					<p style="font-size:5pt"></p>
					<svg id="scatterGram"></svg>
					<script type="text/javascript" src="{% static 'js/scatterGram.js' %}"></script>
					<p style="color:red; font-size:11pt">다른 데이터를 보고싶다면 새로고침을 해주세요</p>
				</div>
			</div>
		</div>
	</div>
</section>

{% endblock %}

